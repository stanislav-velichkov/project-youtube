<div id="profile">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h2>Your Profile</h2>
        </div>
    </div>
    <div class="row" id="details">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h3>Details</h3>
            <p>Your name <span>{{user.username}}</span></p>
            <p>Your Email <span>{{user.email}}</span></p>
        </div>
    </div>
    <div class="row" id="upload">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h3>Upload a Video</h3>
            <form ref='uploadForm' id='uploadForm' method='post' action="/upload" encType="multipart/form-data">
                <input type="file" name="uploadVideo" id="uploadVideo" />
                <div id="failure">
                </div>
                <div id="videoInfo">
                    <div>
                        <input type="text" name="title" placeholder="Add Title" />
                    </div>
                    <div>
                        <textarea name="description" rows="5">Add Description</textarea>
                    </div>
                    <div>
                        <textarea name="tags" rows="5">Add Tags Separated By Comma (music, sports, news... )</textarea>
                    </div>
                </div>
                <input type='submit' id="uploadButton" value='Upload' />

            </form>
            <div id="uploading">
                <img src="assets/images/loading.gif" width="30px" height="30px" /><span> Uploading...</span>
            </div>
            <div id="success">
            </div>

        </div>
    </div>
</div>

<script>
        var isValid = false;

        $("#uploadForm").change(function () {
            $("#failure").html('');
            $("#success").html('');


            var fileExtension = ['mp4', 'mov', 'wmv', 'flv', 'avi', 'webm'];
            if ($.inArray($('#uploadVideo').val().split('.').pop().toLowerCase(), fileExtension) == -1) {
                $("#failure").html('File Extension not Allowed! <br/>(' + fileExtension + ' only.)');
                isValid = false;
            } else if ($('#uploadVideo').prop('files')[0].size > 100 * 1024 * 1024) {
                isValid = false;
                $("#failure").html('File too big! (Max Size: 100MB)');
            } else {
                isValid = true;
            }
        });


        $('#uploadForm').submit(
            function (e) {
                //validate

                if (isValid) {
                    $('#uploading').css('display', 'inline-block');
                    $.ajax({
                        url: '/upload',
                        type: 'POST',
                        data: new FormData(this),
                        processData: false,
                        contentType: false,
                        success: function (result) {
                            console.log(result);
                            $('#uploading').css('display', 'none');
                            $("#success").html('File Uploaded');
                        }
                    });
                }
                e.preventDefault();
            }
        );

    </script>