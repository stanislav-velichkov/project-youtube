<div id="profile">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <h2>Your Profile</h2>
        </div>
    </div>
    <div class="row" id="details">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <h3>Details</h3>
        <p>Your name <span>{{user.user}}</span></p>
        <p>Your Email <span>{{user.email}}</span></p>
        <p>Your Password <span>{{user.password}}</span></p>
        </div>
    </div>
    <div class="row" id="upload">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <h3>Upload a Video</h3>
        <form ref='uploadForm' id='uploadForm' method='post' action="/upload" encType="multipart/form-data">
            <input type="file" name="uploadVideo" id="uploadVideo" />
            <input type='submit' id="uploadButton" value='Upload' />
        </form>
        <div id="uploadResult">
        </div>
        </div>
    </div>


    <script>
    var isValid = false;
    
    $("#uploadForm").change(function () {
        console.log($('#uploadVideo').val().split('.').pop().toLowerCase());
            var fileExtension = ['mp4', 'mov', 'wmv', 'flv', 'avi'];
            if ($.inArray($('#uploadVideo').val().split('.').pop().toLowerCase(), fileExtension) == -1) {
                $("#uploadResult").html('File Extension not Allowed');;
                isValid = false;
            } else {
                isValid = true;
            }
        });

    
    $('#uploadForm' ).submit(
        function( e ) {
            //validate
            
            if(isValid) {
            $.ajax( {
                url: '/upload',
                type: 'POST',
                data: new FormData( this ),
                processData: false,
                contentType: false,
                success: function(result){
                    console.log(result);
                    $("#uploadResult").html('File Uploaded');
                }
            });
            }
            e.preventDefault();
        } 
    );

</script>